# üìÖ Simula√ß√£o: Resposta "O QUE TEMOS PRA HOJE"

## üéØ Cen√°rio de Teste

**Usu√°rio pergunta:** "O que temos pra hoje?"

---

## üìã Resposta Simulada (Markdown)

```
üìÖ O QUE TEMOS PRA HOJE - 10/12/2025

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üö¢ CHEGANDO HOJE (3 processos)
   ‚Ä¢ VDM.0004/25 - Porto: BRRIO - ETA: 10/12 - Status: Descarregando - Modal: Mar√≠timo
   ‚Ä¢ ALH.0176/25 - Porto: BRRIO - ETA: 10/12 - Status: Descarregando - Modal: Mar√≠timo
   ‚Ä¢ GYM.0044/25 - Porto: BRRIO - ETA: 10/12 - Status: Descarregando - Modal: Mar√≠timo

‚úÖ PRONTOS PARA REGISTRO (2 processos)
   ‚Ä¢ VDM.0004/25 - Chegou ontem, sem DI/DUIMP - Tipo: DUIMP - Status CE: DESCARREGADA
   ‚Ä¢ GLT.0043/25 - CCT recepcionado, sem DUIMP - Tipo: DUIMP - Status CCT: RECEPCIONADA

‚ö†Ô∏è PEND√äNCIAS ATIVAS (5 processos)
   ‚Ä¢ ALH.0174/25 - ICMS pendente (h√° 2 dias) - A√ß√£o: Verificar pagamento
   ‚Ä¢ DMD.0085/25 - AFRMM pendente (h√° 1 dia) - A√ß√£o: Verificar pagamento
   ‚Ä¢ BGR.0057/25 - LPCO com exig√™ncia - A√ß√£o: Verificar documenta√ß√£o
   ‚Ä¢ VDM.0003/25 - Bloqueio CE ativo - A√ß√£o: Verificar motivo do bloqueio
   ‚Ä¢ MSS.0018/25 - ICMS pendente (h√° 3 dias) - A√ß√£o: Verificar pagamento

üìã DUIMPs EM AN√ÅLISE (3)
   ‚Ä¢ 25BR00001928777 - Em an√°lise desde 08/12 - Processo: ALH.0174/25 - Status: EM_ANALISE
   ‚Ä¢ 25BR00001928778 - Aguardando resposta - Processo: VDM.0004/25 - Status: AGUARDANDO_RESPOSTA
   ‚Ä¢ 25BR00001928779 - Pendente - Processo: GYM.0044/25 - Status: PENDENTE

üîÑ ETA ALTERADO (2 processos)
   ‚Ä¢ GYM.0044/25 - ETA antecipado: 11/12 ‚Üí 10/12 (1 dia antes) ‚ö°
   ‚Ä¢ DMD.0086/25 - ETA atrasado: 09/12 ‚Üí 11/12 (2 dias depois) ‚è≥

üîî ALERTAS RECENTES
   ‚Ä¢ ‚ö†Ô∏è CE 132505371482302 foi manifestado - Verificar status
   ‚Ä¢ ‚úÖ DUIMP 25BR00001928777 foi liberada - Processo: ALH.0174/25
   ‚Ä¢ üí° 3 processos chegam amanh√£ - Preparar documenta√ß√£o

üí° A√á√ïES SUGERIDAS
   1. üî• Criar DUIMP para VDM.0004/25 (urgente - chegou hoje)
   2. ‚ö†Ô∏è Verificar ICMS de ALH.0174/25 (pendente h√° 2 dias)
   3. ‚ö†Ô∏è Verificar bloqueio CE de VDM.0003/25 (bloqueante)
   4. üìã Aguardar manifesta√ß√£o do CE 132505371482302
   5. üì¶ Preparar documenta√ß√£o para 3 processos que chegam amanh√£

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìä RESUMO: 3 chegando | 2 prontos | 5 pend√™ncias | 3 DUIMPs | 2 ETA alterado

üìà COMPARA√á√ÉO COM ONTEM:
   ‚Ä¢ Processos chegando: 3 hoje vs. 2 ontem (+1) üìà
   ‚Ä¢ Pend√™ncias: 5 hoje vs. 7 ontem (-2) ‚úÖ
   ‚Ä¢ DUIMPs em an√°lise: 3 hoje vs. 5 ontem (-2) ‚úÖ

üì¶ POR CATEGORIA:
   ‚Ä¢ ALH: 1 chegando, 0 prontos, 1 pend√™ncia
   ‚Ä¢ VDM: 1 chegando, 1 pronto, 1 pend√™ncia
   ‚Ä¢ GYM: 1 chegando, 0 prontos, 0 pend√™ncias
   ‚Ä¢ DMD: 0 chegando, 0 prontos, 1 pend√™ncia
   ‚Ä¢ BGR: 0 chegando, 0 prontos, 1 pend√™ncia
   ‚Ä¢ MSS: 0 chegando, 0 prontos, 1 pend√™ncia
   ‚Ä¢ GLT: 0 chegando, 1 pronto, 0 pend√™ncias

üö¢ POR MODAL:
   ‚Ä¢ Mar√≠timo: 3 processos
   ‚Ä¢ A√©reo: 0 processos
```

---

## üîç Exemplo com Filtro

**Usu√°rio pergunta:** "O que temos pra hoje ALH?"

**Resposta filtrada:**

```
üìÖ O QUE TEMOS PRA HOJE - ALH - 10/12/2025

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üö¢ CHEGANDO HOJE (1 processo ALH)
   ‚Ä¢ ALH.0176/25 - Porto: BRRIO - ETA: 10/12 - Status: Descarregando - Modal: Mar√≠timo

‚ö†Ô∏è PEND√äNCIAS ATIVAS (1 processo ALH)
   ‚Ä¢ ALH.0174/25 - ICMS pendente (h√° 2 dias) - A√ß√£o: Verificar pagamento

üìã DUIMPs EM AN√ÅLISE (1 ALH)
   ‚Ä¢ 25BR00001928777 - Em an√°lise desde 08/12 - Processo: ALH.0174/25 - Status: EM_ANALISE

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìä RESUMO ALH: 1 chegando | 0 prontos | 1 pend√™ncia | 1 DUIMP
```

---

## üé® Caracter√≠sticas da Resposta

‚úÖ **Mant√©m o estilo do chat IA**
- Formata√ß√£o markdown (como nas respostas atuais)
- Emojis para identifica√ß√£o visual r√°pida
- Separadores visuais (‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ)

‚úÖ **Prioriza√ß√£o visual**
- üî• Alta prioridade (a√ß√µes urgentes)
- ‚ö†Ô∏è M√©dia prioridade (pend√™ncias)
- ‚ÑπÔ∏è Baixa prioridade (informa√ß√µes)

‚úÖ **Informa√ß√µes acion√°veis**
- Cada item tem contexto suficiente
- A√ß√µes sugeridas s√£o pr√°ticas
- Links para processos quando relevante

‚úÖ **Compara√ß√µes e tend√™ncias**
- Compara√ß√£o com o dia anterior
- Estat√≠sticas por categoria
- Estat√≠sticas por modal

---

## üí° Vantagens desta Abordagem

1. **N√£o quebra o fluxo do chat** - Tudo continua conversacional
2. **Formata√ß√£o rica** - Markdown permite estrutura visual clara
3. **Filtros naturais** - Usu√°rio pode refinar a pergunta
4. **Integra√ß√£o perfeita** - Usa o mesmo sistema de tools existente
5. **Extens√≠vel** - F√°cil adicionar novas se√ß√µes ou filtros

---

## üîß Implementa√ß√£o T√©cnica

### 1. Tool Definition (tool_definitions.py)

```python
{
    "name": "obter_dashboard_hoje",
    "description": "üìÖ DASHBOARD DO DIA: Retorna um resumo consolidado de todas as informa√ß√µes relevantes para o dia atual. Use quando o usu√°rio perguntar: 'o que temos pra hoje?', 'o que temos para hoje?', 'dashboard de hoje', 'resumo do dia', 'o que precisa ser feito hoje?', 'o que est√° chegando hoje?', 'processos de hoje'. Esta fun√ß√£o consolida: processos chegando hoje, processos prontos para registro, pend√™ncias ativas, DUIMPs em an√°lise, processos com ETA alterado, alertas recentes e sugest√µes de a√ß√µes.",
    "parameters": {
        "type": "object",
        "properties": {
            "categoria": {
                "type": "string",
                "description": "Filtro opcional por categoria (ex: ALH, VDM, GYM). Use quando o usu√°rio mencionar categoria espec√≠fica."
            },
            "modal": {
                "type": "string",
                "enum": ["Mar√≠timo", "A√©reo"],
                "description": "Filtro opcional por modal. Use quando o usu√°rio mencionar 'a√©reo' ou 'mar√≠timo'."
            },
            "apenas_pendencias": {
                "type": "boolean",
                "description": "Se true, mostra apenas pend√™ncias. Use quando o usu√°rio perguntar 'o que temos pra hoje com pend√™ncias?'"
            }
        }
    }
}
```

### 2. M√©todo no ProcessoAgent

```python
def _obter_dashboard_hoje(self, arguments: Dict[str, Any], context: Optional[Dict[str, Any]] = None) -> Dict[str, Any]:
    """
    Retorna dashboard consolidado do dia atual.
    """
    # Extrair filtros
    categoria = arguments.get('categoria')
    modal = arguments.get('modal')
    apenas_pendencias = arguments.get('apenas_pendencias', False)
    
    # Buscar dados do banco
    processos_chegando = obter_processos_chegando_hoje(categoria, modal)
    processos_prontos = obter_processos_prontos_registro(categoria, modal)
    pendencias = obter_pendencias_ativas(categoria, modal)
    duimps_analise = obter_duimps_em_analise()
    eta_alterado = obter_processos_eta_alterado(categoria)
    alertas = obter_alertas_recentes()
    
    # Formatar resposta em markdown
    resposta = formatar_dashboard_hoje(
        processos_chegando,
        processos_prontos,
        pendencias,
        duimps_analise,
        eta_alterado,
        alertas,
        categoria,
        apenas_pendencias
    )
    
    return {
        'sucesso': True,
        'resposta': resposta,
        'dados': {
            'processos_chegando': processos_chegando,
            'processos_prontos': processos_prontos,
            'pendencias': pendencias,
            'duimps_analise': duimps_analise,
            'eta_alterado': eta_alterado
        }
    }
```

### 3. Fun√ß√µes auxiliares no db_manager.py

```python
def obter_processos_chegando_hoje(categoria=None, modal=None):
    """Busca processos que chegam hoje."""
    # Query SQL conforme especifica√ß√£o
    pass

def obter_processos_prontos_registro(categoria=None, modal=None):
    """Busca processos prontos para registro DI/DUIMP."""
    # Query SQL conforme especifica√ß√£o
    pass

def obter_pendencias_ativas(categoria=None, modal=None):
    """Busca pend√™ncias ativas."""
    # Query SQL conforme especifica√ß√£o
    pass

def obter_duimps_em_analise():
    """Busca DUIMPs em an√°lise."""
    # Query SQL conforme especifica√ß√£o
    pass

def obter_processos_eta_alterado(categoria=None):
    """Busca processos com ETA alterado (requer hist√≥rico)."""
    # Query SQL conforme especifica√ß√£o
    pass

def obter_alertas_recentes():
    """Busca alertas recentes do sistema de notifica√ß√µes."""
    # Integrar com sistema de notifica√ß√µes existente
    pass
```

---

## ‚úÖ Pr√≥ximos Passos

1. ‚úÖ Validar estrutura do banco de dados (verificar campos)
2. ‚úÖ Implementar fun√ß√µes auxiliares no `db_manager.py`
3. ‚úÖ Adicionar tool definition em `tool_definitions.py`
4. ‚úÖ Implementar m√©todo no `ProcessoAgent`
5. ‚úÖ Criar fun√ß√£o de formata√ß√£o `formatar_dashboard_hoje()`
6. ‚úÖ Testar com dados reais
7. ‚úÖ Ajustar formata√ß√£o baseado em feedback

---

**Status:** üìã Proposta - Aguardando aprova√ß√£o para implementa√ß√£o



